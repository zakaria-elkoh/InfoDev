<style>
  .profile-head {
    transform: translateY(5rem);
  }

  .cover {
    background-image: url(https://images.unsplash.com/photo-1530305408560-82d13781b33a?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1352&q=80);
    background-size: cover;
    background-repeat: no-repeat;
  }

  body {
    background: #654ea3;
    background: linear-gradient(to right, #e96443, #904e95);
    min-height: 100vh;
    overflow-x: hidden;
  }
  nav, .search {
    display: none;
  }
</style>

<div class="row w-100">
  <div class="col-md-10 mx-auto">
    <!-- Profile widget -->
    <div class="bg-white shadow rounded overflow-hidden">
      <div class="px-4 pt-0 pb-4 bg-secondary">
        <div class="media align-items-end profile-head">
          <div class="profile mr-3">
            <img
              src="https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=80"
              alt="..."
              width="130"
              class="rounded mb-2 img-thumbnail"
            /><a href="#" class="btn-outline-dark btn-sm btn-block text-center"
              >Edit profile</a
            >
          </div>
          <div class="media-body mb-5 text-white">
            <h4 class="mt-0 mb-0">Mark Williams</h4>
            <p class="small mb-4">
              <i class="fas fa-map-marker-alt mr-2"></i>New York
            </p>
          </div>
        </div>
        <a href="#" class="edit-profile"><i class="fas fa-edit"></i> Edit Profile</a>
    </div>
    <!-- Article Creation Form -->
    <div class="article-form">
        <h3>Create a New Article</h3>
        <form action="/create-article" method="POST" enctype="multipart/form-data">
            <label for="title">Article Title</label>
            <input type="text" id="title" name="title" placeholder="Enter the title">

            <label for="title">Article Image</label>
            <input type="file" accept="image/*" id="imageInput" name="articleImage" />
            <div class="image-preview w-[25%]">
                <img id="imageOutPut" />
                <p id="imageName"></p>
            </div>
            <label for="content">Article Content</label>
            <textarea id="content" name="content" rows="10" placeholder="Write your article here..."></textarea>

            <button type="submit"><i class="fas fa-paper-plane"></i> Submit Article</button>
        </form>
    </div>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<% if (errors !== null) { %>

    <script>
        setTimeout(function () {
            Swal.fire({
                title: 'Error!',
                text: '<%= errors %>',
                icon: 'error',
                confirmButtonText: 'Try Again'
            });
        }, 1000);  // Delay of 1 second before showing alert
    </script>
    <% } %>
        <script>
            const urlParams = new URLSearchParams(window.location.search);
            const createdStatus = urlParams.get('created');

            if (createdStatus === 'success') {
                setTimeout(
                    Swal.fire({
                        title: 'Article Created!',
                        text: 'Your article has been successfully created.',
                        icon: 'success',
                        confirmButtonText: 'OK'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            const url = new URL(window.location.href);
                            url.searchParams.delete('created');
                            history.pushState({}, document.title, url.href);
                        }
                    })
                    ,
                    1000
                )
            }
            let imageInput = document.getElementById("imageInput");
            let imageOutput = document.getElementById("imageOutPut");
            let imageName = document.getElementById("imageName");
            imageInput.onchange = (ev) => {
                imageOutput.alt = "preview";
                imageOutput.src = URL.createObjectURL(ev.target.files[0]);
                imageName.innerHTML = `<b> ${ev.target.files[0].name} </b>`
                imageOutput.onload = () => {
                    URL.revokeObjectURL(imageOutput.src);
                }
            }
        </script>
